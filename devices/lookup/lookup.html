<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Device Lookup</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #f7f9fc;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }
  .container {
    background: white;
    padding: 2rem;
    border-radius: 12px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.1);
    width: 350px;
  }
  h2 {
    text-align: center;
    color: #333;
  }
  input[type="text"] {
    width: 100%;
    padding: 10px;
    margin: 1rem 0;
    border-radius: 8px;
    border: 1px solid #ccc;
  }
  button {
    width: 100%;
    padding: 10px;
    background: #4f46e5;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
  }
  button:hover {
    background: #4338ca;
  }
  .result {
    margin-top: 1rem;
    background: #f1f5f9;
    padding: 1rem;
    border-radius: 8px;
  }
  .result p {
    margin: 0.3rem 0;
  }
  .error {
    color: red;
    text-align: center;
  }
</style>
</head>
<body>

<div class="container">
  <h2>Device Lookup</h2>
  <input type="text" id="serialInput" placeholder="Enter Serial Number">
  <button onclick="lookupDevice()">Search</button>
  <div class="result" id="result"></div>
  <p class="error" id="error"></p>
</div>

<script>
async function lookupDevice() {
  const serial = document.getElementById('serialInput').value.trim();
  const resultDiv = document.getElementById('result');
  const errorDiv = document.getElementById('error');
  resultDiv.innerHTML = '';
  errorDiv.innerText = '';

  if (!serial) {
    errorDiv.innerText = 'Please enter a serial number.';
    return;
  }

  try {
    // Replace this URL with your GitHub raw JSON link
    const response = await fetch('https://lhort3.github.io/connect/devices/list.json');
    const data = await response.json();

    const device = data.find(d => d.serial_number.toLowerCase() === serial.toLowerCase());
    if (device) {
      resultDiv.innerHTML = `
        <p><strong>Device Name:</strong> ${device.device_name}</p>
        <p><strong>Serial Number:</strong> ${device.serial_number}</p>
        <p><strong>Model Number:</strong> ${device.model_number}</p>
        <p><strong>Software:</strong> ${device.software}</p>
        <p><strong>Safety Pass Date:</strong> ${device.safety_pass_date}</p>
        <p><strong>Next Test Date:</strong> ${device.next_test_date}</p>
      `;
    } else {
      errorDiv.innerText = 'Device not found.';
    }
  } catch (err) {
    console.error(err);
    errorDiv.innerText = 'Error fetching device data.';
  }
}
</script>

</body>
</html>
